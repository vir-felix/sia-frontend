<!DOCTYPE html>
<html>
	<head>
		<!-- CSS -->
		<link rel='stylesheet' href='../../css/roboto-condensed-min.css'>
		<link rel='stylesheet' href='../../css/font-awesome.min.css'>
		<link rel='stylesheet' href='../../css/plugin-standard.css'>
		<link rel='stylesheet' href='css/wallet.css'>
		<link rel='stylesheet' href='css/lists.css'>
	</head>
	<body>
		<!-- Frame -->
		<div class='frame' id='wallet'>
			<!-- Header -->
			<div class='header'>
				<div class='title'>Wallet</div>
				<div class='capsule'>
					<div class='pod' id='confirmed'></div>
					<div class='pod' id='unconfirmed'></div>
					<div class='pod button' id='lock-pod'>
						<i class='fa' id='lock-icon'></i>
						<div id='lock-status'>Status unknown</div>
					</div>
				</div>
			</div>

			<!-- Popups -->
			<div class='popup m-font hidden' id='request-password'>
				<div class='row'>
					<div class='title'> Enter your password </div>
					<div class='button close'>
						<i class='fa fa-times'></i>
					</div>
				</div>
				<input type='checkbox' class='save-password'>Save password <br/>
				<div class='hidden warning s-font'>Warning: This is equivalent to having an
					unencrypted wallet and poses a security risk!</div>
				<input type='password' id='password-field' placeholder='Wallet password'>
				<div class='button' id='enter-password'>
					<i class='fa fa-check-circle'></i>
				</div>
			</div>

			<div class='popup m-font hidden' id='show-password'>
				<div class='row'>
					<div class='title'> Welcome to your Sia Wallet!  </div>
					<div class='button close'>
						<i class='fa fa-times'></i>
					</div>
				</div>
				<p>
					Your wallet has been generated and encrypted using the key
					phrase shown below. You will need to enter this phrase to
					unlock your wallet. Should you ever lose your wallet file,
					you can also use this phrase to regenerate it. Be sure to
					store this phrase somewhere safe!
				</p>
				<p id='generated-password'></p>
				<input type='checkbox' class='save-password'>Save password <br/>
				<div class='hidden warning s-font'>Warning: This is equivalent to having an
					unencrypted wallet and poses a security risk!</div>
				<div class='button' id='confirm-password'>
					<i class='fa fa-key'>
						I've recorded this in a safe place!
					</i>
				</div><br/>
			</div>

			<!-- Transactions Box -->
			<div class='box' id='transaction-box'>
				<div class='row'>
					<div class='title button l-font' id='view-all-transactions'>
						<i class='fa fa-refresh'></i>
						Transactions
					</div>
					<div class='controls m-font'>
						<input type='number' class='page m-font' id='transaction-page' value='1'><span>/MAX_PAGE</span>
					</div>
				</div>
				<div class='list' id='transaction-list'>
				</div>
				<div class='floating button l-font' id='create-transaction'>
					<i class='fa fa-plus'></i>
				</div>
			</div>

			<!-- Addresses Box -->
			<div class='box' id='address-box'>
				<div class='row'>
					<div class='title button l-font' id='view-all-addresses'>
						<i class='fa fa-refresh'></i>
						Addresses
					</div>
					<div class='controls m-font'>
						<input type='search' id='search-bar' placeholder='Search addresses'></input>
						<!--div class='button' id='load-legacy-wallet'>
							<i class='fa fa-folder-open-o'></i>
							Load Legacy Wallet
						</div-->
						<input type='number' class='page m-font' id='address-page' value='1'><span>/MAX_PAGE</span>
					</div>
				</div>
				<div class='list' id='address-list'>
				</div>
				<div class='floating button l-font' id='create-address'>
					<i class='fa fa-plus'></i>
				</div>
			</div>
		</div>
	
		<!-- Make Transaction Frame-->
		<div class='frame hidden' id='make-transaction'>
			<div class='header'>
				<div class='back button'>
					<i class='fa fa-chevron-left'></i>
				</div>
				<div class='title'> Make Transaction </div>
			</div>

			<div class='halfpage'>
				<div class='row'>
					<div class='centered'>
						<div> Total Balance: </div>
						<input type='number' class='l-font' readonly id='total' min='0'>
						<select class='l-font' id='transaction-unit'>
							<option value='1e30'>MS</option>
							<option value='1e27'>kS</option>
							<option value='1e24'selected='selected'>S</option>
							<option value='1e21'>mS</option>
							<option value='1e18'>&muS</option>
							<option class='siafund' value='1'>Siafund</option>
						</select>	
					</div>
				</div>
				<div class='row'>
					<div class='centered'>
						<div> Amount To Send: </div>
						<input type='number' class='l-font' id='transaction-value' min='0'>
						<select class='l-font'>
							<option value='1e30'>MS</option>
							<option value='1e27'>kS</option>
							<option value='1e24'selected='selected'>S</option>
							<option value='1e21'>mS</option>
							<option value='1e18'>&#956S</option>
							<option class='siafund' value='1'>Siafund</option>
						</select>	
					</div>
				</div>
				<div class='row'>
					<div class='centered'>
						<div> Remaining Balance: </div>
						<input type='number' class='l-font' id='remaining' min='0'>
						<select class='l-font'>
							<option value='1e30'>MS</option>
							<option value='1e27'>kS</option>
							<option value='1e24'selected='selected'>S</option>
							<option value='1e21'>mS</option>
							<option value='1e18'>&#956S</option>
							<option class='siafund' value='1'>Siafund</option>
						</select>	
					</div>
				</div>
			</div><!--
			This removes auto-inserted whitespace 
			--><div class='halfpage'>
				<div class='row'>
					<div class='centered'>
						<div> Target Address: </div>
						<input type='text' id='transaction-address' placeholder='Send to address'>
					</div>
				</div>
				<div class='row'>
					<div class='centered'>
						<div class='button' id='send-money'>
							<i class='fa fa-sign-out'></i>
							Send
						</div>
					</div>
				</div>
				<div class='row'>
					<div class='centered'>
						<div class='button transparent' id='confirm'>
							<i class='fa fa-check-circle'></i>
							Confirm?
						</div>
					</div>
				</div>
			</div>
		</div>
	
		<!-- JS -->
		<script>
			// Library for communicating with Sia-UI
			const IPCRenderer = require('electron').ipcRenderer;
			// Library for arbitrary precision in numbers
			const BigNumber = require('bignumber.js');
			// Jquery
			const $ = require('jquery');

			// Siad wrapper/manager
			var Siad = require('sia.js')
			// Make sure Siad settings are in sync with the rest of the UI's
			IPCRenderer.sendToHost('config', {key: 'siad'}, 'siadsettings');
			IPCRenderer.on('siadsettings', function(settings) {
				Siad.configure({
					siad: settings,
				});
			});
			// Slight modification to Siad wrapper for standard error handling
			Siad.apiCall = function(callObj, callback) {
				Siad.call(callObj, function(err, result) {
					if (err) {
						console.error(callObj, err);
						notify(err, 'error');
					} else {
						callback(result);
					}
				});
			}
		</script>
		<script src='js/helpers.js'></script>
		<script src='js/locking.js'></script>
		<script src='js/buttons.js'></script>
		<script src='js/transactions.js'></script>
		<script src='js/sending.js'></script>
		<script src='js/addresses.js'></script>
		<script src='js/lifecycle.js'></script>
	</body>
</html>
